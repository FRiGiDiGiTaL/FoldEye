"use strict";exports.id=802,exports.ids=[802],exports.modules={3802:(a,b,c)=>{c.r(b),c.d(b,{default:()=>k});var d=c(8732),e=c(2015),f=c(9501),g=c.n(f);let h=g()(()=>c.e(117).then(c.bind(c,5117)).then(a=>({default:a.ControlPanel})),{loadableGenerated:{modules:["MainApp.tsx -> ./components/ControlPanel"]},ssr:!1,loading:()=>(0,d.jsx)("div",{className:"w-full md:w-96 glass-panel-dark p-4 flex-shrink-0 shadow-2xl",children:(0,d.jsxs)("div",{className:"animate-pulse",children:[(0,d.jsx)("div",{className:"h-8 bg-gray-700 rounded mb-4"}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("div",{className:"h-16 bg-gray-700 rounded"}),(0,d.jsx)("div",{className:"h-12 bg-gray-700 rounded"}),(0,d.jsx)("div",{className:"h-12 bg-gray-700 rounded"})]})]})})}),i=g()(()=>c.e(324).then(c.bind(c,324)).then(a=>({default:a.CameraView})),{loadableGenerated:{modules:["MainApp.tsx -> ./components/CameraView"]},ssr:!1,loading:()=>(0,d.jsx)("div",{className:"flex-1 bg-gradient-to-b from-black via-gray-900 to-black flex items-center justify-center min-h-[400px]",children:(0,d.jsxs)("div",{className:"text-white text-center",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-400 border-t-transparent mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-xl",children:"Loading AR Camera..."})]})})}),j=a=>{let b=a.split("\n"),c=new Map,d=0,e=/^\s*(\d+(?:-\d+)?(?:,\s*\d+(?:-\d+)?)*)\s+([0-9.,\s]+)/;for(let a of b){let b=a.trim();if(b.startsWith("#")||b.startsWith("PAGE")||""===b)continue;let f=b.match(e);if(!f)continue;let g=f[1],h=f[2].trim().replace(/,\s*$/,""),i=[];for(let a of g.replace(/\s/g,"").split(","))if(a.includes("-")){let[b]=a.split("-"),c=parseInt(b,10);isNaN(c)||c%2==0||i.push(c)}else{let b=parseInt(a,10);isNaN(b)||b%2==0||i.push(b)}for(let a of i){let b=a-1;b>=0&&(c.set(b,h),a>d&&(d=a))}}if(0===d)return[];let f=Array(d).fill("");for(let[a,b]of c.entries())a<f.length&&(f[a]=b);return f},k=()=>{let[a,b]=(0,e.useState)(!1),[c,f]=(0,e.useState)(!1),[g,k]=(0,e.useState)("âœ¨ Enter book dimensions and start camera for enhanced AR experience"),l=`PAGE        Measurements in CM
# Example pattern below - try PDF import for easier setup!
17-18        0.5, 7.9, 8.0, 9.6, 9.8, 10.0, 10.1, 20.5
19-20        0.5, 20.5
21-22        0.5, 8.4, 8.5, 10.7, 10.9, 20.5`,[m,n]=(0,e.useState)({heightCm:0,widthCm:0,paddingTopCm:0,paddingBottomCm:0,instructionsText:l,parsedInstructions:j(l),currentPage:16}),[o,p]=(0,e.useState)({pixelsPerCm:null}),[q,r]=(0,e.useState)({showAllMarks:!0,currentMarkIndex:0}),[s,t]=(0,e.useState)({scale:1,x:0,y:0}),[u,v]=(0,e.useState)(!0),[w,x]=(0,e.useState)("rule-of-thirds"),[y,z]=(0,e.useState)(.4),[A,B]=(0,e.useState)(!1);(0,e.useEffect)(()=>{b(!0)},[]);let C=(0,e.useCallback)(a=>{let b=j(a);n(c=>{let d=c.currentPage;if(d>=b.length||""===b[d]){let a=b.findIndex(a=>""!==a);d=-1!==a?a:0}return{...c,instructionsText:a,parsedInstructions:b,currentPage:d}}),r({showAllMarks:!0,currentMarkIndex:0})},[]),D=(0,e.useCallback)(()=>{if(m.currentPage>=m.parsedInstructions.length)return[];let a=m.parsedInstructions[m.currentPage];return a?a.split(",").map(a=>parseFloat(a.trim())).filter(a=>!isNaN(a)):[]},[m.parsedInstructions,m.currentPage])();(0,e.useEffect)(()=>{r(a=>({...a,currentMarkIndex:Math.min(a.currentMarkIndex,Math.max(0,D.length-1))}))},[D.length,m.currentPage]);let E=(0,e.useCallback)(()=>{n(a=>{for(let b=a.currentPage+1;b<a.parsedInstructions.length;b++)if(a.parsedInstructions[b])return k(`âœ¨ Advanced to Page ${b+1} with enhanced AR visualization`),B(!0),setTimeout(()=>B(!1),100),{...a,currentPage:b};return k(`Reached the last page with marks (${a.currentPage+1})`),a}),r({showAllMarks:!0,currentMarkIndex:0})},[k]),F=(0,e.useCallback)(()=>{n(a=>{for(let b=a.currentPage-1;b>=0;b--)if(a.parsedInstructions[b])return k(`âœ¨ Viewing Page ${b+1} with enhanced AR features`),B(!0),setTimeout(()=>B(!1),100),{...a,currentPage:b};return k(`Already on the first page with marks (${a.currentPage+1})`),a}),r({showAllMarks:!0,currentMarkIndex:0})},[k]),G=(0,e.useCallback)(a=>{r(b=>{if("toggleAll"===a){let a=!b.showAllMarks;return k(a?"âœ¨ Showing all marks with particle effects":"\uD83C\uDFAF Single mark mode with enhanced focus"),B(!0),setTimeout(()=>B(!1),100),{...b,showAllMarks:a}}if("next"===a){let a=b.currentMarkIndex+1;return a>=D.length?(k("\uD83D\uDD04 Cycling to first mark"),{showAllMarks:!1,currentMarkIndex:0}):(k(`ðŸ“ Mark ${a+1}/${D.length}: ${D[a]?.toFixed(1)}cm`),{showAllMarks:!1,currentMarkIndex:a})}if("prev"===a){let a=0===b.currentMarkIndex?D.length-1:b.currentMarkIndex-1;return k(`ðŸ“ Mark ${a+1}/${D.length}: ${D[a]?.toFixed(1)}cm`),{showAllMarks:!1,currentMarkIndex:a}}return b})},[D.length,k]),H=(0,e.useCallback)(()=>{k("âœ¨ Enhanced AR calibration complete! Particle effects, glassmorphism UI, and grid alignment ready."),B(!0),setTimeout(()=>B(!1),100)},[]);return a?(0,d.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 text-gray-100",children:[(0,d.jsxs)("div",{className:"flex flex-col md:flex-row min-h-screen",children:[(0,d.jsx)("div",{className:"w-full md:w-96 md:flex-shrink-0",children:(0,d.jsx)(h,{isCameraActive:c,setIsCameraActive:f,pageData:m,setPageData:n,calibrationData:o,setCalibrationData:p,handleInstructionsTextChange:C,statusMessage:g,setStatusMessage:k,transform:s,setTransform:t,markNavigation:q,currentMarksCm:D,handleMarkNavigation:G,handleNextPage:E,handlePrevPage:F,onCalibrate:H,showGrid:u,setShowGrid:v,gridType:w,setGridType:x,gridOpacity:y,setGridOpacity:z})}),(0,d.jsx)("div",{className:"flex-1 bg-gradient-to-b from-black via-gray-900 to-black flex items-center justify-center relative min-h-[400px] md:min-h-screen",children:(0,d.jsx)(i,{isCameraActive:c,calibrationData:o,setCalibrationData:p,pageData:m,marksCm:D,markNavigation:q,transform:s,setTransform:t,setStatusMessage:k,onCalibrate:H,onMarkNavigation:G,onNextPage:E,onPrevPage:F,showGrid:u,gridType:w,gridOpacity:y,triggerParticles:A})})]}),(0,d.jsx)("div",{className:"fixed bottom-4 right-4 bg-black/50 text-white text-xs p-2 rounded opacity-50 pointer-events-none md:hidden",children:"Mobile Layout Active"}),(0,d.jsx)("div",{className:"fixed bottom-4 right-4 bg-black/50 text-white text-xs p-2 rounded opacity-50 pointer-events-none hidden md:block",children:"Desktop Layout Active"})]}):(0,d.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 flex items-center justify-center",children:(0,d.jsxs)("div",{className:"text-white text-center",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-400 border-t-transparent mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-xl",children:"Loading BookfoldAR..."})]})})}}};