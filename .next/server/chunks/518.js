"use strict";exports.id=518,exports.ids=[518],exports.modules={518:(a,b,c)=>{c.r(b),c.d(b,{VoiceControl:()=>f});var d=c(8732),e=c(2015);let f=({onNextPage:a,onPrevPage:b,onToggleMarks:c,onStatusMessage:f})=>{let{voiceState:g,startListening:h,stopListening:i,commandPatterns:j}=(a=>{let[b,c]=(0,e.useState)({isListening:!1,isSupported:!1,lastCommand:null,confidence:0,error:null}),d=(0,e.useRef)(null),f=(0,e.useRef)(null),g={next:["next","next page","forward","go forward","advance","turn page","page forward","continue","proceed"],prev:["previous","prev","back","go back","previous page","page back","return","backward"],toggleMarks:["toggle marks","show marks","hide marks","marks","toggle view","switch view","change view"]},h=(0,e.useCallback)(()=>{if(!b.isSupported)return null;let a=new(window.webkitSpeechRecognition||window.SpeechRecognition);return a.continuous=!0,a.interimResults=!1,a.lang="en-US",a.maxAlternatives=3,a.onstart=()=>{c(a=>({...a,isListening:!0,error:null}))},a.onend=()=>{c(a=>({...a,isListening:!1})),d.current&&setTimeout(()=>{try{a.start()}catch(a){console.log("Recognition restart failed:",a)}},1e3)},a.onerror=a=>{console.error("Speech recognition error:",a.error),c(b=>({...b,error:`Recognition error: ${a.error}`,isListening:!1}))},a.onresult=a=>{let b=a.results,d=b[b.length-1];if(d.isFinal){let a=d[0].transcript.toLowerCase().trim(),b=d[0].confidence;console.log("Voice command heard:",a,"Confidence:",b),c(c=>({...c,lastCommand:a,confidence:100*b})),f.current&&clearTimeout(f.current),i(a,b),f.current=setTimeout(()=>{c(a=>({...a,lastCommand:null,confidence:0}))},3e3)}},a},[b.isSupported]),i=(0,e.useCallback)((b,c)=>{if(c<.6)return void console.log("Command confidence too low:",c);let d=b.toLowerCase().trim();if(g.next.some(a=>d.includes(a)||d===a)){console.log("Executing: Next Page"),a.nextPage();return}if(g.prev.some(a=>d.includes(a)||d===a)){console.log("Executing: Previous Page"),a.prevPage();return}if(g.toggleMarks.some(a=>d.includes(a)||d===a)){console.log("Executing: Toggle Marks"),a.toggleMarks();return}console.log("No matching command found for:",b)},[a]),j=(0,e.useCallback)(()=>{if(!b.isSupported)return void c(a=>({...a,error:"Speech recognition not supported in this browser"}));d.current||(d.current=h());try{d.current?.start()}catch(a){console.error("Failed to start recognition:",a),c(a=>({...a,error:"Failed to start voice recognition"}))}},[b.isSupported,h]),k=(0,e.useCallback)(()=>{d.current&&(d.current.stop(),d.current=null),f.current&&(clearTimeout(f.current),f.current=null),c(a=>({...a,isListening:!1,lastCommand:null,confidence:0}))},[]);return(0,e.useEffect)(()=>()=>{k()},[k]),{voiceState:b,startListening:j,stopListening:k,commandPatterns:g}})({nextPage:()=>{a(),f("\uD83C\uDFA4 Voice command: Next page")},prevPage:()=>{b(),f("\uD83C\uDFA4 Voice command: Previous page")},toggleMarks:()=>{c(),f("\uD83C\uDFA4 Voice command: Toggle marks")}});return g.isSupported?(0,d.jsxs)("div",{className:"bg-gray-700/50 border border-gray-600 rounded-md p-3 mb-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-300 flex items-center",children:"\uD83C\uDFA4 Voice Control"}),(0,d.jsx)("button",{onClick:g.isListening?i:h,className:`px-3 py-1 rounded text-sm font-medium transition-colors ${g.isListening?"bg-red-600 hover:bg-red-700 text-white animate-pulse":"bg-green-600 hover:bg-green-700 text-white"}`,children:g.isListening?"\uD83D\uDD34 Stop":"\uD83C\uDFA4 Start"})]}),(0,d.jsxs)("div",{className:"mb-3",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,d.jsx)("span",{className:"text-gray-400",children:"Status:"}),(0,d.jsx)("span",{className:`font-medium ${g.isListening?"text-green-400":"text-gray-500"}`,children:g.isListening?"\uD83D\uDFE2 Listening...":"⚫ Stopped"})]}),g.lastCommand&&(0,d.jsxs)("div",{className:"mt-2 p-2 bg-blue-900/30 border border-blue-700 rounded",children:[(0,d.jsxs)("div",{className:"text-blue-300 text-sm font-medium",children:['Last Command: "',g.lastCommand,'"']}),(0,d.jsxs)("div",{className:"text-blue-400 text-xs",children:["Confidence: ",g.confidence.toFixed(0),"%"]})]}),g.error&&(0,d.jsx)("div",{className:"mt-2 p-2 bg-red-900/30 border border-red-700 rounded",children:(0,d.jsxs)("div",{className:"text-red-300 text-sm",children:["⚠️ ",g.error]})})]}),(0,d.jsxs)("div",{className:"text-xs text-gray-400",children:[(0,d.jsx)("div",{className:"font-medium mb-2",children:"Available Commands:"}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-green-400",children:"Next Page:"}),(0,d.jsx)("span",{className:"ml-2",children:'"next", "next page", "forward", "advance"'})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-blue-400",children:"Previous Page:"}),(0,d.jsx)("span",{className:"ml-2",children:'"previous", "back", "go back"'})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-yellow-400",children:"Toggle Marks:"}),(0,d.jsx)("span",{className:"ml-2",children:'"toggle marks", "show marks", "marks"'})]})]}),g.isListening&&(0,d.jsx)("div",{className:"mt-2 text-center text-cyan-400 animate-pulse",children:"\uD83C\uDFA4 Say a command clearly..."})]})]}):(0,d.jsxs)("div",{className:"bg-gray-700/50 border border-gray-600 rounded-md p-3 mb-4",children:[(0,d.jsx)("div",{className:"text-orange-400 text-sm",children:"\uD83C\uDFA4 Voice recognition not supported in this browser"}),(0,d.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"Try Chrome, Edge, or Safari for voice control"})]})}}};