"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[139],{7139:(e,r,n)=>{n.r(r),n.d(r,{VoiceControl:()=>o});var s=n(7876),t=n(4232);let o=e=>{let{onNextPage:r,onPrevPage:n,onToggleMarks:o,onStatusMessage:i}=e,{voiceState:a,startListening:c,stopListening:l,commandPatterns:d}=(e=>{let[r,n]=(0,t.useState)({isListening:!1,isSupported:"webkitSpeechRecognition"in window||"SpeechRecognition"in window,lastCommand:null,confidence:0,error:null}),s=(0,t.useRef)(null),o=(0,t.useRef)(null),i={next:["next","next page","forward","go forward","advance","turn page","page forward","continue","proceed"],prev:["previous","prev","back","go back","previous page","page back","return","backward"],toggleMarks:["toggle marks","show marks","hide marks","marks","toggle view","switch view","change view"]},a=(0,t.useCallback)(()=>{if(!r.isSupported)return null;let e=new(window.webkitSpeechRecognition||window.SpeechRecognition);return e.continuous=!0,e.interimResults=!1,e.lang="en-US",e.maxAlternatives=3,e.onstart=()=>{n(e=>({...e,isListening:!0,error:null}))},e.onend=()=>{n(e=>({...e,isListening:!1})),s.current&&setTimeout(()=>{try{e.start()}catch(e){console.log("Recognition restart failed:",e)}},1e3)},e.onerror=e=>{console.error("Speech recognition error:",e.error),n(r=>({...r,error:"Recognition error: ".concat(e.error),isListening:!1}))},e.onresult=e=>{let r=e.results,s=r[r.length-1];if(s.isFinal){let e=s[0].transcript.toLowerCase().trim(),r=s[0].confidence;console.log("Voice command heard:",e,"Confidence:",r),n(n=>({...n,lastCommand:e,confidence:100*r})),o.current&&clearTimeout(o.current),c(e,r),o.current=setTimeout(()=>{n(e=>({...e,lastCommand:null,confidence:0}))},3e3)}},e},[r.isSupported]),c=(0,t.useCallback)((r,n)=>{if(n<.6)return void console.log("Command confidence too low:",n);let s=r.toLowerCase().trim();if(i.next.some(e=>s.includes(e)||s===e)){console.log("Executing: Next Page"),e.nextPage();return}if(i.prev.some(e=>s.includes(e)||s===e)){console.log("Executing: Previous Page"),e.prevPage();return}if(i.toggleMarks.some(e=>s.includes(e)||s===e)){console.log("Executing: Toggle Marks"),e.toggleMarks();return}console.log("No matching command found for:",r)},[e]),l=(0,t.useCallback)(()=>{if(!r.isSupported)return void n(e=>({...e,error:"Speech recognition not supported in this browser"}));s.current||(s.current=a());try{var e;null==(e=s.current)||e.start()}catch(e){console.error("Failed to start recognition:",e),n(e=>({...e,error:"Failed to start voice recognition"}))}},[r.isSupported,a]),d=(0,t.useCallback)(()=>{s.current&&(s.current.stop(),s.current=null),o.current&&(clearTimeout(o.current),o.current=null),n(e=>({...e,isListening:!1,lastCommand:null,confidence:0}))},[]);return(0,t.useEffect)(()=>()=>{d()},[d]),{voiceState:r,startListening:l,stopListening:d,commandPatterns:i}})({nextPage:()=>{r(),i("\uD83C\uDFA4 Voice command: Next page")},prevPage:()=>{n(),i("\uD83C\uDFA4 Voice command: Previous page")},toggleMarks:()=>{o(),i("\uD83C\uDFA4 Voice command: Toggle marks")}});return a.isSupported?(0,s.jsxs)("div",{className:"bg-gray-700/50 border border-gray-600 rounded-md p-3 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-300 flex items-center",children:"\uD83C\uDFA4 Voice Control"}),(0,s.jsx)("button",{onClick:a.isListening?l:c,className:"px-3 py-1 rounded text-sm font-medium transition-colors ".concat(a.isListening?"bg-red-600 hover:bg-red-700 text-white animate-pulse":"bg-green-600 hover:bg-green-700 text-white"),children:a.isListening?"\uD83D\uDD34 Stop":"\uD83C\uDFA4 Start"})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Status:"}),(0,s.jsx)("span",{className:"font-medium ".concat(a.isListening?"text-green-400":"text-gray-500"),children:a.isListening?"\uD83D\uDFE2 Listening...":"⚫ Stopped"})]}),a.lastCommand&&(0,s.jsxs)("div",{className:"mt-2 p-2 bg-blue-900/30 border border-blue-700 rounded",children:[(0,s.jsxs)("div",{className:"text-blue-300 text-sm font-medium",children:['Last Command: "',a.lastCommand,'"']}),(0,s.jsxs)("div",{className:"text-blue-400 text-xs",children:["Confidence: ",a.confidence.toFixed(0),"%"]})]}),a.error&&(0,s.jsx)("div",{className:"mt-2 p-2 bg-red-900/30 border border-red-700 rounded",children:(0,s.jsxs)("div",{className:"text-red-300 text-sm",children:["⚠️ ",a.error]})})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:[(0,s.jsx)("div",{className:"font-medium mb-2",children:"Available Commands:"}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-green-400",children:"Next Page:"}),(0,s.jsx)("span",{className:"ml-2",children:'"next", "next page", "forward", "advance"'})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-blue-400",children:"Previous Page:"}),(0,s.jsx)("span",{className:"ml-2",children:'"previous", "back", "go back"'})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-yellow-400",children:"Toggle Marks:"}),(0,s.jsx)("span",{className:"ml-2",children:'"toggle marks", "show marks", "marks"'})]})]}),a.isListening&&(0,s.jsx)("div",{className:"mt-2 text-center text-cyan-400 animate-pulse",children:"\uD83C\uDFA4 Say a command clearly..."})]})]}):(0,s.jsxs)("div",{className:"bg-gray-700/50 border border-gray-600 rounded-md p-3 mb-4",children:[(0,s.jsx)("div",{className:"text-orange-400 text-sm",children:"\uD83C\uDFA4 Voice recognition not supported in this browser"}),(0,s.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"Try Chrome, Edge, or Safari for voice control"})]})}}}]);